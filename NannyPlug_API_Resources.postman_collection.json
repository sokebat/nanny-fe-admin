{
  "info": {
    "_postman_id": "nannyplug-api-resources-collection",
    "name": "NannyPlug API - Resources",
    "description": "API collection for NannyPlug backend - Resources Module\n\n**Base URL:** `{{base_url}}`\n**Port:** 3000 (default)\n\n**Features:**\n- Public Resource Browsing\n- Role-based Resource Access (Family, Nanny, Vendor)\n- Admin Resource Management\n- AWS S3 File Upload Support\n- Resource Statistics\n\n**Setup:**\n1. Import this collection\n2. Use the same environment (`base_url`, `access_token`, `admin_token`)\n3. Login as admin to get `admin_token`\n4. Login as user to get `access_token`\n\n**Environment Variables:**\n- `base_url`: http://localhost:3000/api (or your production URL)\n- `access_token`: JWT token for authenticated user\n- `admin_token`: JWT token for admin user\n- `resource_id`: Resource ID (set after creating/finding a resource)\n\n**Resource Types:**\n- `pdf`: PDF documents\n- `video`: Video files\n- `audio`: Audio files\n- `article`: Article content\n- `link`: External links\n- `other`: Other file types",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Public APIs",
      "item": [
        {
          "name": "Get All Resources",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/public/resources?page=1&limit=10&category=&type=&search=&targetAudience=",
              "host": ["{{base_url}}"],
              "path": ["public", "resources"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)",
                  "disabled": false
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (default: 10)",
                  "disabled": false
                },
                {
                  "key": "category",
                  "value": "",
                  "description": "Filter by category",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "",
                  "description": "Filter by type: pdf, video, audio, article, link, other",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search in title/description",
                  "disabled": true
                },
                {
                  "key": "targetAudience",
                  "value": "",
                  "description": "Filter by audience: caregiver, parent, vendor",
                  "disabled": true
                }
              ]
            },
            "description": "Get list of all listed resources. No authentication required.\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `category`: Filter by category (optional)\n- `type`: Filter by resource type - pdf, video, audio, article, link, other (optional)\n- `search`: Search in title/description (optional)\n- `targetAudience`: Filter by target audience - caregiver, parent, vendor (optional)"
          },
          "response": []
        },
        {
          "name": "Get Popular Resources",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/public/resources/popular?limit=10",
              "host": ["{{base_url}}"],
              "path": ["public", "resources", "popular"],
              "query": [
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of popular resources to return (default: 10)",
                  "disabled": false
                }
              ]
            },
            "description": "Get list of popular/featured resources. No authentication required.\n\n**Query Parameters:**\n- `limit`: Number of resources to return (default: 10)"
          },
          "response": []
        },
        {
          "name": "Get Resource Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/public/resources/{{resource_id}}",
              "host": ["{{base_url}}"],
              "path": ["public", "resources", "{{resource_id}}"]
            },
            "description": "Get detailed information about a specific resource. View count is incremented automatically.\n\n**Path Parameters:**\n- `resource_id`: Resource ID"
          },
          "response": []
        }
      ],
      "description": "Public APIs that don't require authentication"
    },
    {
      "name": "User APIs",
      "item": [
        {
          "name": "Family Resources",
          "item": [
            {
              "name": "Get Family Resources",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/family/resources?page=1&limit=10&category=&type=&search=",
                  "host": ["{{base_url}}"],
                  "path": ["family", "resources"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number (default: 1)",
                      "disabled": false
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Items per page (default: 10)",
                      "disabled": false
                    },
                    {
                      "key": "category",
                      "value": "",
                      "description": "Filter by category",
                      "disabled": true
                    },
                    {
                      "key": "type",
                      "value": "",
                      "description": "Filter by type: pdf, video, audio, article, link, other",
                      "disabled": true
                    },
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search in title/description",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get resources filtered for parents/families. Requires PARENT role.\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `category`: Filter by category (optional)\n- `type`: Filter by resource type (optional)\n- `search`: Search in title/description (optional)"
              },
              "response": []
            }
          ],
          "description": "APIs for Family/Parent role"
        },
        {
          "name": "Nanny Resources",
          "item": [
            {
              "name": "Get Nanny Resources",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/nanny/resources?page=1&limit=10&category=&type=&search=",
                  "host": ["{{base_url}}"],
                  "path": ["nanny", "resources"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number (default: 1)",
                      "disabled": false
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Items per page (default: 10)",
                      "disabled": false
                    },
                    {
                      "key": "category",
                      "value": "",
                      "description": "Filter by category",
                      "disabled": true
                    },
                    {
                      "key": "type",
                      "value": "",
                      "description": "Filter by type: pdf, video, audio, article, link, other",
                      "disabled": true
                    },
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search in title/description",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get resources filtered for nannies/caregivers. Requires NANNY role.\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `category`: Filter by category (optional)\n- `type`: Filter by resource type (optional)\n- `search`: Search in title/description (optional)"
              },
              "response": []
            }
          ],
          "description": "APIs for Nanny/Caregiver role"
        },
        {
          "name": "Vendor Resources",
          "item": [
            {
              "name": "Get Vendor Resources",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/vendor/resources?page=1&limit=10&category=&type=&search=",
                  "host": ["{{base_url}}"],
                  "path": ["vendor", "resources"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1",
                      "description": "Page number (default: 1)",
                      "disabled": false
                    },
                    {
                      "key": "limit",
                      "value": "10",
                      "description": "Items per page (default: 10)",
                      "disabled": false
                    },
                    {
                      "key": "category",
                      "value": "",
                      "description": "Filter by category",
                      "disabled": true
                    },
                    {
                      "key": "type",
                      "value": "",
                      "description": "Filter by type: pdf, video, audio, article, link, other",
                      "disabled": true
                    },
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search in title/description",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get resources filtered for vendors. Requires VENDOR role.\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `category`: Filter by category (optional)\n- `type`: Filter by resource type (optional)\n- `search`: Search in title/description (optional)"
              },
              "response": []
            }
          ],
          "description": "APIs for Vendor role"
        }
      ],
      "description": "User APIs that require authentication and role-based access"
    },
    {
      "name": "Admin APIs",
      "item": [
        {
          "name": "Get All Resources (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/resources?page=1&limit=10&category=&type=&search=&targetAudience=",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)",
                  "disabled": false
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (default: 10)",
                  "disabled": false
                },
                {
                  "key": "category",
                  "value": "",
                  "description": "Filter by category",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "",
                  "description": "Filter by type: pdf, video, audio, article, link, other",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search in title/description",
                  "disabled": true
                },
                {
                  "key": "targetAudience",
                  "value": "",
                  "description": "Filter by audience: caregiver, parent, vendor",
                  "disabled": true
                }
              ]
            },
            "description": "Get all resources including unlisted ones. Requires ADMIN role.\n\n**Query Parameters:**\n- `page`: Page number (default: 1)\n- `limit`: Items per page (default: 10)\n- `category`: Filter by category (optional)\n- `type`: Filter by resource type (optional)\n- `search`: Search in title/description (optional)\n- `targetAudience`: Filter by target audience (optional)"
          },
          "response": []
        },
        {
          "name": "Get Resource by ID (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/resources/{{resource_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "{{resource_id}}"]
            },
            "description": "Get resource details by ID. Does not increment view count. Requires ADMIN role.\n\n**Path Parameters:**\n- `resource_id`: Resource ID"
          },
          "response": []
        },
        {
          "name": "Create Resource",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "form-data",
              "formdata": [
                {
                  "key": "title",
                  "value": "Sample Resource Title",
                  "type": "text",
                  "description": "Resource title (required)"
                },
                {
                  "key": "description",
                  "value": "This is a sample resource description",
                  "type": "text",
                  "description": "Resource description (optional)"
                },
                {
                  "key": "category",
                  "value": "Education",
                  "type": "text",
                  "description": "Resource category (optional)"
                },
                {
                  "key": "type",
                  "value": "pdf",
                  "type": "text",
                  "description": "Resource type: pdf, video, audio, article, link, other (required)"
                },
                {
                  "key": "url",
                  "value": "https://example.com/resource",
                  "type": "text",
                  "description": "URL for link/article type resources (optional)"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "type": "text",
                  "description": "Whether resource is active (optional, default: true)"
                },
                {
                  "key": "isListed",
                  "value": "true",
                  "type": "text",
                  "description": "Whether resource is listed publicly (optional, default: true)"
                },
                {
                  "key": "isPopular",
                  "value": "false",
                  "type": "text",
                  "description": "Whether resource is popular (optional, default: false)"
                },
                {
                  "key": "targetAudience",
                  "value": "[\"parent\", \"nanny\"]",
                  "type": "text",
                  "description": "Target audience array: [\"caregiver\", \"parent\", \"vendor\"] (optional)"
                },
                {
                  "key": "teachableResourceId",
                  "value": "",
                  "type": "text",
                  "description": "Teachable resource ID (optional)"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "Resource file (PDF, video, audio, etc.) - Max 50MB (optional for link/article types)"
                },
                {
                  "key": "thumbnail",
                  "type": "file",
                  "src": [],
                  "description": "Thumbnail image (JPEG, PNG, WebP) - Max 5MB (optional)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/admin/resources",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources"]
            },
            "description": "Create a new resource with optional file and thumbnail uploads. Files are uploaded to AWS S3. Requires ADMIN role.\n\n**Body (form-data):**\n- `title`: Resource title (required)\n- `description`: Resource description (optional)\n- `category`: Resource category (optional)\n- `type`: Resource type - pdf, video, audio, article, link, other (required)\n- `url`: URL for link/article types (optional)\n- `isActive`: Whether resource is active (optional, default: true)\n- `isListed`: Whether resource is listed publicly (optional, default: true)\n- `isPopular`: Whether resource is popular (optional, default: false)\n- `targetAudience`: JSON array of target audiences (optional)\n- `teachableResourceId`: Teachable resource ID (optional)\n- `file`: Resource file - PDF, video, audio, etc. (Max 50MB, optional for link/article)\n- `thumbnail`: Thumbnail image - JPEG, PNG, WebP (Max 5MB, optional)\n\n**File Upload Notes:**\n- Files are uploaded to S3: `resources/files/{userId}/`\n- Thumbnails are uploaded to S3: `resources/thumbnails/{userId}/`\n- All uploaded files are publicly accessible via S3 URLs"
          },
          "response": []
        },
        {
          "name": "Update Resource",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "form-data",
              "formdata": [
                {
                  "key": "title",
                  "value": "Updated Resource Title",
                  "type": "text",
                  "description": "Resource title (optional)"
                },
                {
                  "key": "description",
                  "value": "Updated description",
                  "type": "text",
                  "description": "Resource description (optional)"
                },
                {
                  "key": "category",
                  "value": "Updated Category",
                  "type": "text",
                  "description": "Resource category (optional)"
                },
                {
                  "key": "type",
                  "value": "video",
                  "type": "text",
                  "description": "Resource type: pdf, video, audio, article, link, other (optional)"
                },
                {
                  "key": "url",
                  "value": "https://example.com/updated-resource",
                  "type": "text",
                  "description": "URL for link/article type resources (optional)"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "type": "text",
                  "description": "Whether resource is active (optional)"
                },
                {
                  "key": "isListed",
                  "value": "true",
                  "type": "text",
                  "description": "Whether resource is listed publicly (optional)"
                },
                {
                  "key": "isPopular",
                  "value": "true",
                  "type": "text",
                  "description": "Whether resource is popular (optional)"
                },
                {
                  "key": "targetAudience",
                  "value": "[\"parent\", \"vendor\"]",
                  "type": "text",
                  "description": "Target audience array (optional)"
                },
                {
                  "key": "teachableResourceId",
                  "value": "",
                  "type": "text",
                  "description": "Teachable resource ID (optional)"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "New resource file to replace existing (optional)"
                },
                {
                  "key": "thumbnail",
                  "type": "file",
                  "src": [],
                  "description": "New thumbnail image to replace existing (optional)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/admin/resources/{{resource_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "{{resource_id}}"]
            },
            "description": "Update an existing resource. Can update fields and/or replace files. Requires ADMIN role.\n\n**Path Parameters:**\n- `resource_id`: Resource ID\n\n**Body (form-data):**\n- All fields are optional\n- Upload new `file` or `thumbnail` to replace existing ones\n- See Create Resource for field descriptions"
          },
          "response": []
        },
        {
          "name": "Toggle Resource Listing",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isListed\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/admin/resources/{{resource_id}}/toggle-listing",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "{{resource_id}}", "toggle-listing"]
            },
            "description": "Toggle resource listing status (list/unlist). Requires ADMIN role.\n\n**Path Parameters:**\n- `resource_id`: Resource ID\n\n**Body (JSON):**\n- `isListed`: Boolean - true to list, false to unlist"
          },
          "response": []
        },
        {
          "name": "Toggle Resource Popular",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isPopular\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/admin/resources/{{resource_id}}/toggle-popular",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "{{resource_id}}", "toggle-popular"]
            },
            "description": "Toggle resource popular status. Requires ADMIN role.\n\n**Path Parameters:**\n- `resource_id`: Resource ID\n\n**Body (JSON):**\n- `isPopular`: Boolean - true to mark as popular, false to unmark"
          },
          "response": []
        },
        {
          "name": "Delete Resource",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/resources/{{resource_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "{{resource_id}}"]
            },
            "description": "Delete a resource permanently. Requires ADMIN role.\n\n**Path Parameters:**\n- `resource_id`: Resource ID\n\n**Note:** This will delete the resource from the database. S3 files are not automatically deleted."
          },
          "response": []
        },
        {
          "name": "Get Resource Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/resources/stats",
              "host": ["{{base_url}}"],
              "path": ["admin", "resources", "stats"]
            },
            "description": "Get resource statistics including total count, by type, by category, popular count, etc. Requires ADMIN role."
          },
          "response": []
        }
      ],
      "description": "Admin APIs for managing resources"
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "resource_id",
      "value": "",
      "type": "string"
    }
  ]
}
